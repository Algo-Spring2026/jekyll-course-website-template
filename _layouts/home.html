<!-- ========== هرم تیمی یکپارچه ========== -->
<div style="text-align: center; margin-top: 20px;">

    {% assign instructors = site.data.people.instructors %}
    {% assign all_tas = site.data.people.teaching_assistants %}
    {% assign head_tas = all_tas | slice:0,2 %}
    {% assign other_tas = all_tas | slice:2, 999 %}

    <!-- ردیف اول: اساتید (نوک هرم) -->
    <div class="pyramid-row">
        {% for ins in instructors %}
        <div class="image--cover-container instructor-item">
            <img src="{{ ins.profile_pic | prepend: site.baseurl }}" class="image--cover">
            <p><strong>{{ ins.name }}</strong><br><span class="role-badge instructor">Instructor</span></p>
            {% if ins.webpage %}<p><a href="{{ ins.webpage }}">وب‌سایت</a></p>{% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- ردیف دوم: head TAها -->
    {% if head_tas.size > 0 %}
    <div class="pyramid-row">
        {% for ta in head_tas %}
        <div class="image--cover-container head-ta-item">
            <img src="{{ ta.profile_pic | prepend: site.baseurl }}" class="image--cover">
            <p><strong>{{ ta.name }}</strong><br><span class="role-badge head-ta">Head TA</span></p>
            {% if ta.webpage %}<p><a href="{{ ta.webpage }}">وب‌سایت</a></p>{% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- ردیف‌های بعدی: بقیه TAها به صورت هرمی (۱, ۲, ۳, ...) -->
    {% assign remaining = other_tas %}
    {% assign total_remaining = remaining | size %}
    {% assign index = 0 %}
    {% assign row_number = 1 %}
    {% assign max_rows = 20 %}

    {% for row in (1..max_rows) %}
        {% assign remaining_count = total_remaining | minus: index %}
        {% if remaining_count > 0 %}
            {% assign row_size = row_number %}
            {% if remaining_count < row_number %}
                {% assign row_size = remaining_count %}
            {% endif %}

            <div class="pyramid-row">
                {% for i in (1..row_size) %}
                    {% assign ta = remaining[index] %}
                    <div class="image--cover-container">
                        <img src="{{ ta.profile_pic | prepend: site.baseurl }}" class="image--cover">
                        <p><strong>{{ ta.name }}</strong><br><span class="role-badge ta">TA</span></p>
                        {% if ta.webpage %}<p><a href="{{ ta.webpage }}">وب‌سایت</a></p>{% endif %}
                    </div>
                    {% assign index = index | plus: 1 %}
                {% endfor %}
            </div>

            {% assign row_number = row_number | plus: 1 %}
        {% endif %}
    {% endfor %}
</div>
<!-- ========== پایان هرم ========== -->

<style>
.pyramid-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 20px;
    gap: 15px;
}

.image--cover-container {
    width: 120px;
    margin: 0;
    text-align: center;
    background: #f9f9f9;
    border-radius: 8px;
    padding: 10px 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* اندازه بزرگتر برای اساتید */
.instructor-item {
    width: 150px;
}

/* اندازه متوسط برای head TAها */
.head-ta-item {
    width: 130px;
}

.image--cover {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 8px;
}

.instructor-item .image--cover {
    width: 120px;
    height: 120px;
}

.head-ta-item .image--cover {
    width: 110px;
    height: 110px;
}

.role-badge {
    display: inline-block;
    font-size: 0.75em;
    padding: 3px 8px;
    border-radius: 12px;
    color: white;
    margin-top: 4px;
}

.role-badge.instructor { background-color: #2c3e50; }
.role-badge.head-ta { background-color: #16a085; }
.role-badge.ta { background-color: #7f8c8d; }

@media (max-width: 600px) {
    .image--cover-container {
        width: 100px;
        padding: 5px;
    }
    .instructor-item { width: 120px; }
    .head-ta-item { width: 110px; }
    .image--cover {
        width: 80px;
        height: 80px;
    }
    .instructor-item .image--cover { width: 100px; height: 100px; }
    .head-ta-item .image--cover { width: 90px; height: 90px; }
}
</style>
