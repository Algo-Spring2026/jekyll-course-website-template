<div style="text-align: center; margin-top: 20px;">
    <h2>Course Team</h2>

    {% assign instructors = site.data.people.instructors %}
    {% assign all_tas = site.data.people.teaching_assistants %}
    {% assign all_people = instructors | concat: all_tas %}
    {% assign total = all_people | size %}
    
    {% assign instructors_count = instructors | size %}
    {% assign tas_count = all_tas | size %}
   
    {% assign head_count = tas_count %}
    {% if head_count > 2 %}
        {% assign head_count = 2 %}
    {% endif %}
    
    
    {% assign instructors_end = instructors_count %}
    {% assign head_end = instructors_end | plus: head_count %}
    
    {% assign index = 0 %}
    {% assign row_number = 1 %}
    {% assign max_rows = 20 %}

    {% for row in (1..max_rows) %}
        {% assign remaining = total | minus: index %}
        {% if remaining <= 0 %}
            {% break %}
        {% endif %}

        {% assign row_size = row_number %}
        {% if remaining < row_number %}
            {% assign row_size = remaining %}
        {% endif %}

        <div class="pyramid-row">
            {% for i in (1..row_size) %}
                {% assign person = all_people[index] %}
                
                
                {% if index < instructors_end %}
                    {% assign role = "INSTRUCTOR" %}
                {% elsif index < head_end %}
                    {% assign role = "HEAD TA" %}
                {% else %}
                    {% assign role = "TA" %}
                {% endif %}
                
                <div class="image--cover-container">
                    <img src="{{ person.profile_pic | prepend: site.baseurl }}" class="image--cover" alt="{{ person.name }}">
                    {% if person.webpage %}
                        <p><a href="{{ person.webpage }}">{{ person.name }}</a></p>
                    {% else %}
                        <p>{{ person.name }}</p>
                    {% endif %}
                    <span class="role-badge role-{{ role | slugify }}">{{ role }}</span>
                </div>
                
                {% assign index = index | plus: 1 %}
            {% endfor %}
        </div>

        {% assign row_number = row_number | plus: 1 %}
    {% endfor %}
</div>
